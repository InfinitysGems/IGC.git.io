<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <meta name="description"
        content="DeFi made Easy. One Click Staking, No Impermanent Loss, Locked Liquidity Forever.">
    <title>Infinity Stones</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="css/dropdown_style.css">
    <link rel="stylesheet" href="css/theme_style.css">
    <link rel="stylesheet" href="css/mbr-additional.css" type="text/css">
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
</head>

<body>
  <section class="menu menu3 cid-slHSHPg7yN" once="menu" id="menu3-o">
    <nav class="navbar navbar-dropdown navbar-expand-lg">
        <div class="container">
            <div class="navbar-brand">
                <span class="navbar-logo">
                    <a href="index.html">
                        <img src="images/logo.png" alt="Mobirise" style="height: 3rem;">
                    </a>
                </span>
                <span class="navbar-caption-wrap"><a class="navbar-caption text-black text-primary display-7"
                        href="index.html">Infinity Stones</a></span>
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse"
                data-target="#navbarSupportedContent" aria-controls="navbarNavAltMarkup" aria-expanded="false"
                aria-label="Toggle navigation">
                <div class="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav nav-dropdown nav-right" data-app-modern-menu="true">
                    <li class="nav-item dropdown">
                        
                        <a class="nav-link link dropdown-toggle text-black display-4"
                            href="#" data-toggle="dropdown-submenu" aria-expanded="false">
                            Stones Farms</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item text-black display-4"
                            href="#">Development</a>
                            <!-- <a class="dropdown-item text-black text-primary display-4"
                                href="#info-1">S.H.I.E.L.D.</a><a
                                class="dropdown-item text-black text-primary display-4" href="#info-2">Hydra</a><a
                                class="dropdown-item text-black text-primary display-4"
                                href="#info-3">Illuminati</a><a
                                class="text-black dropdown-item text-primary display-4" href="#info-4"
                                aria-expanded="false">Wakanda<br></a> -->
                            
                            </div>
                    </li>
                    <li class="nav-item dropdown"><a class="nav-link link text-black dropdown-toggle display-4"
                            href="#" data-toggle="dropdown-submenu" aria-expanded="false">Gems
                            Farms</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item text-black display-4"
                            href="#">Development</a>
                            <!-- <a class="text-black dropdown-item text-primary display-4" href="#sto-1">Soul
                                Stone</a> -->
                                
                                <!-- <a class="text-black dropdown-item text-primary display-4" href="#sto-1"
                                aria-expanded="false">Reality Stone</a><a
                                class="text-black dropdown-item text-primary display-4" href="#sto-1"
                                aria-expanded="false">Space Stone</a><a
                                class="text-black dropdown-item text-primary display-4" href="#sto-1"
                                aria-expanded="false">Power Stone</a><a
                                class="text-black dropdown-item text-primary display-4" href="#sto-1"
                                aria-expanded="false">Time Stone</a><a
                                class="text-black dropdown-item text-primary display-4" href="#sto-1"
                                aria-expanded="false">Mind Stone</a><a
                                class="text-black dropdown-item text-primary display-4" href="#sto-1"
                                aria-expanded="false">Infinite Gloves</a> -->
                        </div>
                    </li>
                    <li class="nav-item dropdown"><a class="nav-link link dropdown-toggle text-black display-4"
                            href="#sto-7" data-toggle="dropdown-submenu" aria-expanded="false">NFTs</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item text-black display-4"
                            href="#">Development</a>
                            <!-- <a class="dropdown-item text-black display-4"
                                href="#sto-7">Thanos</a> -->
                        </div>
                    </li>
                    <!-- <li class="nav-item"><a class="nav-link link text-black text-primary display-4"
                            href="#sto-7">Press</a>
                    </li> -->
                </ul>
                <div class="icons-menu">

                    <a class="iconfont-wrapper" href="indexcn.html"
                        style="font-size: 1.0rem; line-height: 35px; color: #3a3030!important;">
                        简体中文
                    </a>
                </div>
            </div>
        </div>
    </nav>
  </section>
  <section class="header3 cid-slHUWxmpYW" id="header3-u">
    <div class="container">
        <div class="media-container-row">
            <div class="mbr-figure" style="width: 100%;">
                <img src="images/eggs-transparent-background-18-920x496.png?id=11" alt="Mobirise" title="">
            </div>
            <div class="media-content">
                <h1 class="mbr-section-title mbr-white pb-3 mbr-fonts-style display-1">
                    <strong><br></strong><strong>DeFi made easy</strong><br>
                </h1>
                <div class="mbr-section-text mbr-white pb-3 ">
                    <p class="mbr-text mbr-fonts-style display-5"><em>One Click Staking<br>Locked
                            Liquidity</em><br><em>Multiple Pools
                            <br></em><br></p>
                </div>
                <div class="mbr-section-btn"><a class="btn btn-md btn-success display-4" href="https://t.me/infinitygmes"
                        target="_blank">Telegram<br></a>
                 <a
                        class="btn btn-md btn-white-outline display-4" href="#info2-x">Table</a>
                </div>
            </div>
        </div>
    </div>
</section>
    <section class="nftContainer" id="app">
        <ul class="nftProList">
            <li class="nftProItem" v-for="(item,index) in gemList" :key="index">
                <img src="./images/PowerStone.jpg">
                <div class="nftPanel">
                    <h2 class="names">{{item.name}}</h2>
                    <p class="infos">{{item.info}}</p>
                    <p class="prices">初始售价    {{item.cost}}IGC</p>
                    <p class="prices">当前售价    {{item.price}}IGC</p>
                    <p class="prices">预估收益    {{item.income}}IGC</p>
                    <p class="prices">当前轮次    {{item.rounds}}</p>
                    <p class="hoders">当前权益持有者： <span>{{item.holder}}</span></p>
                    <el-button class="btn">立即抢购</el-button>
                </div>
            </li>
        </ul>
    </section>

  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/nav-dropdown.js"></script>
  <script src="js/navbar-dropdown.js"></script>
  
  <script>
      console.log(window.tronWeb)
      var app = new Vue({
        el: '#app',
        data: {
            TOKENC:null,
            tokenAddr:'TK8wApG8g9bfoUSFuJi6YNfEtCVVH8Fsa4',
            gemList:[
                {
                    active:0,
                    name:'力量宝石',
                    info:'无限大的物理力量，且使用者将变成不可战胜的绝对刀枪不入',
                    cost:0,
                    price:0,
                    income:0,
                    rounds:0,
                    fee:0,
                    holder:'TDMAoKcmGy6qYAHin7fwVnwcuRP8X1ujhf',
                    contract:'TMcSCMa6c5k9sV6V2MTq5ydMw4uMy5sZfd'
                }
            ]
        },
        methods: {
            async init(){
                this.TOKENC = await window.tronWeb.contract().at('TTSLeAmeyRWsRJfzwExQMM7EoS67nFnFUW');
                this.gemList.forEach((item,index) => {
                    this.getInfos(item,index)
                })
            },
            async getInfos(item,index) {
                debugger
                let contract = await window.tronWeb.contract().at('TTSLeAmeyRWsRJfzwExQMM7EoS67nFnFUW');
                item.cost = await contract['initialPrice']().call()
                let price = await contract['calculatePayment']().call()
                item.price = price[0]/Math.pow(10,6)
                item.fee = price[1]/Math.pow(10,6)
                item.income = price[0] + price[0]*0.05 - price[0]*0.01
                item.rounds = await contract['roundNumber']().call()
                item.holder = await contract['EquityOwner']().call()
                this.$set(this.gemList,index,item)
            },
            initTronWeb() { // 初始化tronweb
                return new Promise(function(resolve, reject) {
                    const tries = 0
                    const loadFinish = function() {
                        resolve(window.tronWeb)
                    }
                    const timer = setInterval(function() {
                        if (window.tronWeb) {
                            clearInterval(timer)
                            if (!window.tronWeb.defaultAddress.base58) {
                            window.tronWeb.on('addressChanged', function() {
                                return loadFinish()
                            })
                            } else {
                                return loadFinish()
                            }
                        }
                        if (tries > 10) {
                            clearInterval(timer)
                            reject()
                        }
                    }, 100)
                })
                }
        },
        async created(){
            this.initTronWeb().then(()=>{
                this.init()
            })
        }
      })
  </script>
  <style>
      body{
          background:#efefef;
      }
      ul,li,a,p,h2,h3{padding:0;margin:0;list-style: none;}
      .nftContainer{
          max-width:1200px;
          padding:20px 10px;
          box-sizing: border-box;
          margin:0 auto;
      }
      .nftProList{
          display:flex;
          justify-content: space-between;
          align-items: center;
      }
      .nftProItem {
          text-align:center;
      }
      .nftProItem img{
          width:85px;
          border-radius:50%;
          margin-bottom:20px;
      }
      .nftProItem .nftPanel{
          background:#fff;
          border-radius:10px;
          padding:10px 20px 20px;
          width:300px;
      }
      .nftPanel .names{
          font-size:24px;
          font-weight:bold;
          padding-top:10px;
          padding-bottom:20px;
      }
      .nftPanel .infos{
          font-size:14px;
          text-align:left;
          padding-bottom:30px;
      }
      .nftPanel .prices{
          font-size:16px;
          text-align:left;
          padding-bottom:5px;
      }
      .nftPanel .prices span{
          font-size:18px;
      }
      .nftPanel .hoders{
          padding-top:20px;
      }
      .nftPanel .btn{
          background:#0008b2;
          color:#fff; 
          height:45px;  
          margin-top:40px;
      }
  </style>
</body>
</html>  